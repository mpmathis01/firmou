<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:css='false' b:layoutsversion='3' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
  <head>
    <meta charset='utf-8'/>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes' name='viewport'/>
    <title>Firmou - Or√ßamentos Profissionais</title>
    
    <!-- Oculta elementos nativos do Blogger -->
    <b:skin><![CDATA[ 
      body { margin: 0; padding: 0; } 
      .navbar, .blog-feeds, .feed-links, #header, #footer { display: none !important; }
    ]]></b:skin>
    
    <!-- 
      ATUALIZA√á√ÉO AUTOM√ÅTICA VIA JSDELIVR CDN
      
      Este template √© FIXO - voc√™ N√ÉO precisa atualiz√°-lo!
      
      O JavaScript adiciona automaticamente um timestamp na URL,
      for√ßando o CDN a buscar a vers√£o mais recente a cada deploy.
      
      Como funciona:
      1. Voc√™ faz: npm run deploy:prod
      2. Aguarda 1-2 minutos
      3. Usu√°rios recarregam a p√°gina
      4. JavaScript busca vers√£o atualizada automaticamente
    -->
  </head>
  <body>
    <!-- Container do React -->
    <div id='root'></div>
    
    <!-- Script de carregamento com cache-busting autom√°tico -->
    <script>
    //<![CDATA[
    (function() {
      // Gera timestamp baseado em intervalos de 5 minutos
      // Isso garante que todos os usu√°rios vejam a mesma vers√£o
      // mas for√ßa atualiza√ß√£o a cada 5 minutos
      const now = Date.now();
      const fiveMinutes = 5 * 60 * 1000;
      const cacheKey = Math.floor(now / fiveMinutes);
      
      // URL do build com cache-busting autom√°tico
      const BUILD_URL = 'https://cdn.jsdelivr.net/gh/mpmathis01/firmou@prod/build/prod/index.html?v=' + cacheKey;
      
      console.log('üöÄ Firmou - Carregando vers√£o mais recente');
      console.log('üì° URL:', BUILD_URL);
      console.log('üîÑ Cache atualiza a cada 5 minutos');
      
      // Busca o HTML do build
      fetch(BUILD_URL)
        .then(response => {
          if (!response.ok) {
            throw new Error('HTTP error! status: ' + response.status);
          }
          return response.text();
        })
        .then(html => {
          // Cria um parser DOM
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          
          // Extrai e injeta o CSS
          const styles = doc.querySelectorAll('style');
          styles.forEach(function(style) {
            document.head.appendChild(style.cloneNode(true));
          });
          
          // Extrai e injeta os scripts
          const scripts = doc.querySelectorAll('script');
          scripts.forEach(function(oldScript) {
            const newScript = document.createElement('script');
            
            // Copia todos os atributos
            Array.from(oldScript.attributes).forEach(function(attr) {
              newScript.setAttribute(attr.name, attr.value);
            });
            
            // Copia o conte√∫do
            newScript.textContent = oldScript.textContent;
            
            // Adiciona ao documento
            document.body.appendChild(newScript);
          });
          
          console.log('‚úÖ Firmou carregado com sucesso!');
        })
        .catch(function(error) {
          console.error('‚ùå Erro ao carregar Firmou:', error);
          document.getElementById('root').innerHTML = 
            '<div style="padding:20px;text-align:center;font-family:sans-serif;">' +
            '<h2>‚ö†Ô∏è Erro ao carregar aplica√ß√£o</h2>' +
            '<p>Por favor, recarregue a p√°gina ou tente novamente mais tarde.</p>' +
            '<button onclick="location.reload()" style="padding:10px 20px;font-size:16px;cursor:pointer;">Recarregar</button>' +
            '</div>';
        });
    })();
    //]]>
    </script>
    
    <!-- Se√ß√£o obrigat√≥ria do Blogger -->
    <b:section id='main' showaddelement='false'/>
  </body>
</html>
